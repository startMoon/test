<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.morning.star.dao.GoodsSpecDAO">
    <resultMap id="TohomeMap" type="com.morning.star.bean.RetailGoodsSpec">
        <result property="spuCode" column="spuId"/>
        <result property="goodsCode" column="itemCode"/>
        <result property="specKey" column="attrName"/>
        <result property="specValue" column="attrValueName"/>
        <result property="isMain" column="isMain"/>
    </resultMap>

    <select id="selectAll" resultMap="TohomeMap">
        SELECT A.spuId,A.itemCode,C.attrName,B.attrValueName,A.isMain FROM tohome.th_product_attr AS A,tohome.th_product_attr_value AS B,tohome.th_product_item_attr AS C
        WHERE A.`attrId` = C.`attrId` AND A.`attrValueId` = B.`attrValueId`
    </select>

    <insert id="addGoodsSpec">
        use `retail_base_info`;
        insert into retail_goods_spec(
        spu_code,goods_code,spec_key,spec_value,company_code,is_main,
        priority,create_time,modify_time,operator_id,operator_name
        )
        values (
        #{spuCode},#{goodsCode},#{specKey},#{specValue},#{companyCode},#{isMain},
        #{priority},now(),now(),#{operatorId},#{operatorName}
        )
    </insert>

</mapper>